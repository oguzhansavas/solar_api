<!doctype html> <!-- `site.alt_lang` can specify a language different from the UI --> <html lang="en" > <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"> <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"> <meta name="mobile-web-app-capable" content="yes"> <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> <meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><!-- Setup Open Graph image --> <!-- Begin Jekyll SEO tag v2.8.0 --> <meta name="generator" content="Jekyll v4.3.4" /> <meta property="og:title" content="Examples &amp; Use Cases" /> <meta property="og:locale" content="en" /> <meta name="description" content="Real-world examples and practical use cases for the Solar Irradiance Forecast API with code samples in multiple languages." /> <meta property="og:description" content="Real-world examples and practical use cases for the Solar Irradiance Forecast API with code samples in multiple languages." /> <link rel="canonical" href="https://oguzhansavas.github.io/solar_api/examples/" /> <meta property="og:url" content="https://oguzhansavas.github.io/solar_api/examples/" /> <meta property="og:site_name" content="Solar Irradiance Forecast API" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Examples &amp; Use Cases" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Real-world examples and practical use cases for the Solar Irradiance Forecast API with code samples in multiple languages.","headline":"Examples &amp; Use Cases","url":"https://oguzhansavas.github.io/solar_api/examples/"}</script> <!-- End Jekyll SEO tag --> <title>Examples & Use Cases | Solar Irradiance Forecast API </title> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://realfavicongenerator.net/ --> <link rel="apple-touch-icon" sizes="180x180" href="/solar_api/assets/img/favicons/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/solar_api/assets/img/favicons/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/solar_api/assets/img/favicons/favicon-16x16.png"> <link rel="shortcut icon" href="/solar_api/assets/img/favicons/favicon.ico"> <meta name="apple-mobile-web-app-title" content="Solar Irradiance Forecast API"> <meta name="application-name" content="Solar Irradiance Forecast API"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/solar_api/assets/img/favicons/browserconfig.xml"> <meta name="theme-color" content="#ffffff"> <!-- Resource Hints --> <link rel="preconnect" href="https://fonts.googleapis.com" > <link rel="dns-prefetch" href="https://fonts.googleapis.com" > <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link rel="dns-prefetch" href="https://fonts.gstatic.com" > <link rel="preconnect" href="https://cdn.jsdelivr.net" > <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" > <!-- Bootstrap --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"> <!-- Theme style --> <link rel="stylesheet" href="/solar_api/assets/css/jekyll-theme-chirpy.css"> <!-- Web Font --> <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"> <!-- Font Awesome Icons --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"> <!-- 3rd-party Dependencies --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"> <!-- Image Popup --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <!-- Scripts --> <script src="/solar_api/assets/js/dist/theme.min.js"></script> <!-- JS selector for site. --> <!-- commons --> <!-- layout specified --> <!-- image lazy-loading & popup & clipboard --> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js"></script> <script defer src="/solar_api/assets/js/dist/page.min.js"></script> <!-- Pageviews --> <!-- A placeholder to allow defining custom metadata --> </head> <body> <!-- The Side Bar --> <aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"> <header class="profile-wrapper"> <a href="/solar_api/" id="avatar" class="rounded-circle"></a> <a class="site-title d-block" href="/solar_api/">Solar Irradiance Forecast API</a> <p class="site-subtitle fst-italic mb-0">Fast, accurate solar irradiance data and forecasting for renewable energy applications</p> </header> <!-- .profile-wrapper --> <nav class="flex-column flex-grow-1 w-100 ps-0"> <ul class="nav"> <!-- home --> <li class="nav-item"> <a href="/solar_api/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a> </li> <!-- the real tabs --> </ul> </nav> <div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> </div> <!-- .sidebar-bottom --> </aside> <!-- #sidebar --> <div id="main-wrapper" class="d-flex justify-content-center"> <div class="container d-flex flex-column px-xxl-5"> <!-- The Top Bar --> <header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"> <div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" > <nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/solar_api/">Home</a> </span> <span>Examples & Use Cases</span> </nav> <!-- endof #breadcrumb --> <button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button> <div id="topbar-title"> Examples & Use Cases </div> <button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button> </div> </header> <div class="row flex-grow-1"> <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"> <!-- Refactor the HTML structure --> <!-- In order to allow a wide table to scroll horizontally, we suround the markdown table with `<div class="table-wrapper">` and `</div>` --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --> <!-- Change the icon of checkbox --> <!-- Handle images --> <!-- Add header for code snippets --> <!-- Create heading anchors --> <!-- return --> <article class="px-1"> <h1 class="dynamic-title"> Examples & Use Cases </h1> <div class="content"> <h2 id="-real-world-use-cases"><span class="me-2">üéØ Real-World Use Cases</span><a href="#-real-world-use-cases" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>Explore practical applications and implementation examples for the Solar Irradiance Forecast API.</p> <hr /> <h2 id="-solar-panel-optimization"><span class="me-2">üè† Solar Panel Optimization</span><a href="#-solar-panel-optimization" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>Optimize solar panel placement and energy storage systems using historical irradiance data.</p> <h3 id="use-case-annual-solar-potential-analysis"><span class="me-2">Use Case: Annual Solar Potential Analysis</span><a href="#use-case-annual-solar-potential-analysis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>Calculate the annual solar energy potential for a rooftop installation in Amsterdam:</p> <div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kn">import</span> <span class="n">requests</span> <span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span> <span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span> <span class="k">def</span> <span class="nf">calculate_annual_solar_potential</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2023</span><span class="p">):</span> <span class="sh">"""</span><span class="s">Calculate annual solar potential for a given location</span><span class="sh">"""</span> <span class="c1"># Get historical data for the entire year </span> <span class="n">start_date</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s">0101</span><span class="sh">"</span> <span class="n">end_date</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s">1231</span><span class="sh">"</span> <span class="n">url</span> <span class="o">=</span> <span class="sh">"</span><span class="s">https://solar-api.onrender.com/v1/irradiance/historical</span><span class="sh">"</span> <span class="n">params</span> <span class="o">=</span> <span class="p">{</span> <span class="sh">"</span><span class="s">lat</span><span class="sh">"</span><span class="p">:</span> <span class="n">lat</span><span class="p">,</span> <span class="sh">"</span><span class="s">lon</span><span class="sh">"</span><span class="p">:</span> <span class="n">lon</span><span class="p">,</span> <span class="sh">"</span><span class="s">start</span><span class="sh">"</span><span class="p">:</span> <span class="n">start_date</span><span class="p">,</span> <span class="sh">"</span><span class="s">end</span><span class="sh">"</span><span class="p">:</span> <span class="n">end_date</span><span class="p">,</span> <span class="sh">"</span><span class="s">parameters</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">total_irradiance</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">community</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">SB</span><span class="sh">"</span> <span class="p">}</span> <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span> <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">()</span> <span class="c1"># Convert to DataFrame for analysis </span> <span class="n">irradiance_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">]</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">irradiance_data</span><span class="p">.</span><span class="nf">items</span><span class="p">()),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">timestamp</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">])</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">timestamp</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">timestamp</span><span class="sh">'</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="sh">'</span><span class="s">%Y%m%d%H</span><span class="sh">'</span><span class="p">)</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">])</span> <span class="c1"># Calculate daily totals (Wh/m¬≤) </span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">date</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">timestamp</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">date</span> <span class="n">daily_totals</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">(</span><span class="sh">'</span><span class="s">date</span><span class="sh">'</span><span class="p">)[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">].</span><span class="nf">sum</span><span class="p">()</span> <span class="c1"># Annual statistics </span> <span class="n">annual_total</span> <span class="o">=</span> <span class="n">daily_totals</span><span class="p">.</span><span class="nf">sum</span><span class="p">()</span> <span class="c1"># Wh/m¬≤/year </span> <span class="n">peak_day</span> <span class="o">=</span> <span class="n">daily_totals</span><span class="p">.</span><span class="nf">max</span><span class="p">()</span> <span class="c1"># Wh/m¬≤/day </span> <span class="n">average_daily</span> <span class="o">=</span> <span class="n">daily_totals</span><span class="p">.</span><span class="nf">mean</span><span class="p">()</span> <span class="c1"># Wh/m¬≤/day </span> <span class="k">return</span> <span class="p">{</span> <span class="sh">'</span><span class="s">annual_total_kwh_m2</span><span class="sh">'</span><span class="p">:</span> <span class="n">annual_total</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">,</span> <span class="sh">'</span><span class="s">peak_day_kwh_m2</span><span class="sh">'</span><span class="p">:</span> <span class="n">peak_day</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">,</span> <span class="sh">'</span><span class="s">average_daily_kwh_m2</span><span class="sh">'</span><span class="p">:</span> <span class="n">average_daily</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">,</span> <span class="sh">'</span><span class="s">location</span><span class="sh">'</span><span class="p">:</span> <span class="sa">f</span><span class="sh">"</span><span class="s">(</span><span class="si">{</span><span class="n">lat</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">lon</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span> <span class="p">}</span> <span class="c1"># Example usage for Amsterdam </span><span class="n">result</span> <span class="o">=</span> <span class="nf">calculate_annual_solar_potential</span><span class="p">(</span><span class="mf">52.3676</span><span class="p">,</span> <span class="mf">4.9041</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Annual Solar Potential Analysis for </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="sh">'</span><span class="s">location</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">:</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Annual Total: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="sh">'</span><span class="s">annual_total_kwh_m2</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}</span><span class="s"> kWh/m¬≤</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Peak Day: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="sh">'</span><span class="s">peak_day_kwh_m2</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}</span><span class="s"> kWh/m¬≤</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Daily Average: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="sh">'</span><span class="s">average_daily_kwh_m2</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}</span><span class="s"> kWh/m¬≤</span><span class="sh">"</span><span class="p">)</span> </code></div></div> <p><button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">üìã Copy</button></p> <hr /> <h2 id="-energy-trading--grid-management"><span class="me-2">‚ö° Energy Trading &amp; Grid Management</span><a href="#-energy-trading--grid-management" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>Make informed energy trading decisions with precise solar generation forecasts.</p> <h3 id="use-case-7-day-power-production-forecast"><span class="me-2">Use Case: 7-Day Power Production Forecast</span><a href="#use-case-7-day-power-production-forecast" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>Forecast solar power output for energy trading decisions:</p> <div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">class</span> <span class="nc">SolarForecastTrader</span> <span class="p">{</span> <span class="nf">constructor</span><span class="p">(</span><span class="nx">apiBaseUrl</span><span class="p">,</span> <span class="nx">lat</span><span class="p">,</span> <span class="nx">lon</span><span class="p">,</span> <span class="nx">systemCapacity</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">apiBaseUrl</span> <span class="o">=</span> <span class="nx">apiBaseUrl</span><span class="p">;</span> <span class="k">this</span><span class="p">.</span><span class="nx">lat</span> <span class="o">=</span> <span class="nx">lat</span><span class="p">;</span> <span class="k">this</span><span class="p">.</span><span class="nx">lon</span> <span class="o">=</span> <span class="nx">lon</span><span class="p">;</span> <span class="k">this</span><span class="p">.</span><span class="nx">systemCapacity</span> <span class="o">=</span> <span class="nx">systemCapacity</span><span class="p">;</span> <span class="c1">// kW</span> <span class="p">}</span> <span class="k">async</span> <span class="nf">getForecastData</span><span class="p">(</span><span class="nx">startDate</span><span class="p">,</span> <span class="nx">endDate</span><span class="p">)</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">apiBaseUrl</span><span class="p">}</span><span class="s2">/v1/irradiance/forecast`</span><span class="p">;</span> <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">URLSearchParams</span><span class="p">({</span> <span class="na">lat</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="na">lon</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">lon</span><span class="p">,</span> <span class="na">start</span><span class="p">:</span> <span class="nx">startDate</span><span class="p">,</span> <span class="na">end</span><span class="p">:</span> <span class="nx">endDate</span> <span class="p">});</span> <span class="k">try</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">fetch</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">url</span><span class="p">}</span><span class="s2">?</span><span class="p">${</span><span class="nx">params</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">();</span> <span class="k">return</span> <span class="nx">data</span><span class="p">;</span> <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error fetching forecast:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span> <span class="nf">calculatePowerOutput</span><span class="p">(</span><span class="nx">irradiance</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Convert irradiance (W/m¬≤) to power output (kW)</span> <span class="c1">// Assumes standard panel efficiency and array size</span> <span class="kd">const</span> <span class="nx">panelEfficiency</span> <span class="o">=</span> <span class="mf">0.20</span><span class="p">;</span> <span class="c1">// 20% efficiency</span> <span class="kd">const</span> <span class="nx">arrayArea</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">systemCapacity</span> <span class="o">/</span> <span class="mf">0.25</span><span class="p">;</span> <span class="c1">// m¬≤ (assuming 250W/m¬≤)</span> <span class="k">return </span><span class="p">(</span><span class="nx">irradiance</span> <span class="o">*</span> <span class="nx">arrayArea</span> <span class="o">*</span> <span class="nx">panelEfficiency</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">// kW</span> <span class="p">}</span> <span class="k">async</span> <span class="nf">generateTradingStrategy</span><span class="p">(</span><span class="nx">days</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">startDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">();</span> <span class="kd">const</span> <span class="nx">endDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span> <span class="nx">endDate</span><span class="p">.</span><span class="nf">setDate</span><span class="p">(</span><span class="nx">endDate</span><span class="p">.</span><span class="nf">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="nx">days</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">startStr</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">formatDateTime</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">endStr</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">formatDateTime</span><span class="p">(</span><span class="nx">endDate</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">forecast</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nf">getForecastData</span><span class="p">(</span><span class="nx">startStr</span><span class="p">,</span> <span class="nx">endStr</span><span class="p">);</span> <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">forecast</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span> <span class="kd">const</span> <span class="nx">strategy</span> <span class="o">=</span> <span class="p">{</span> <span class="na">totalForecastMWh</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">dailyBreakdown</span><span class="p">:</span> <span class="p">[],</span> <span class="na">recommendations</span><span class="p">:</span> <span class="p">[]</span> <span class="p">};</span> <span class="c1">// Process hourly forecasts</span> <span class="kd">const</span> <span class="nx">hourlyData</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">entries</span><span class="p">(</span><span class="nx">forecast</span><span class="p">.</span><span class="nx">forecast</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">dailyTotals</span> <span class="o">=</span> <span class="p">{};</span> <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">timestamp</span><span class="p">,</span> <span class="nx">irradiance</span><span class="p">]</span> <span class="k">of</span> <span class="nx">hourlyData</span><span class="p">)</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">date</span> <span class="o">=</span> <span class="nx">timestamp</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span> <span class="kd">const</span> <span class="nx">powerKW</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">calculatePowerOutput</span><span class="p">(</span><span class="nx">irradiance</span><span class="p">);</span> <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">dailyTotals</span><span class="p">[</span><span class="nx">date</span><span class="p">])</span> <span class="p">{</span> <span class="nx">dailyTotals</span><span class="p">[</span><span class="nx">date</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="na">totalMWh</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">peakKW</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">hours</span><span class="p">:</span> <span class="p">[]</span> <span class="p">};</span> <span class="p">}</span> <span class="nx">dailyTotals</span><span class="p">[</span><span class="nx">date</span><span class="p">].</span><span class="nx">totalMWh</span> <span class="o">+=</span> <span class="nx">powerKW</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">// Convert to MWh</span> <span class="nx">dailyTotals</span><span class="p">[</span><span class="nx">date</span><span class="p">].</span><span class="nx">peakKW</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">max</span><span class="p">(</span><span class="nx">dailyTotals</span><span class="p">[</span><span class="nx">date</span><span class="p">].</span><span class="nx">peakKW</span><span class="p">,</span> <span class="nx">powerKW</span><span class="p">);</span> <span class="nx">dailyTotals</span><span class="p">[</span><span class="nx">date</span><span class="p">].</span><span class="nx">hours</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span> <span class="nx">timestamp</span><span class="p">,</span> <span class="nx">irradiance</span><span class="p">,</span> <span class="nx">powerKW</span> <span class="p">});</span> <span class="p">}</span> <span class="c1">// Generate recommendations</span> <span class="k">for </span><span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">date</span><span class="p">,</span> <span class="nx">data</span><span class="p">]</span> <span class="k">of</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">entries</span><span class="p">(</span><span class="nx">dailyTotals</span><span class="p">))</span> <span class="p">{</span> <span class="nx">strategy</span><span class="p">.</span><span class="nx">dailyBreakdown</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span> <span class="na">date</span><span class="p">:</span> <span class="nx">date</span><span class="p">,</span> <span class="na">totalMWh</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">totalMWh</span><span class="p">.</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="na">peakKW</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">peakKW</span><span class="p">.</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">});</span> <span class="nx">strategy</span><span class="p">.</span><span class="nx">totalForecastMWh</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">totalMWh</span><span class="p">;</span> <span class="c1">// Trading recommendations</span> <span class="k">if </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">totalMWh</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span> <span class="p">{</span> <span class="nx">strategy</span><span class="p">.</span><span class="nx">recommendations</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">date</span><span class="p">}</span><span class="s2">: High production day - Consider selling excess energy`</span><span class="p">);</span> <span class="p">}</span> <span class="k">else</span> <span class="k">if </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">totalMWh</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span> <span class="nx">strategy</span><span class="p">.</span><span class="nx">recommendations</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">date</span><span class="p">}</span><span class="s2">: Low production day - Consider purchasing backup energy`</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span> <span class="k">return</span> <span class="nx">strategy</span><span class="p">;</span> <span class="p">}</span> <span class="nf">formatDateTime</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nf">getFullYear</span><span class="p">();</span> <span class="kd">const</span> <span class="nx">month</span> <span class="o">=</span> <span class="nc">String</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nf">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nf">padStart</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">day</span> <span class="o">=</span> <span class="nc">String</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nf">getDate</span><span class="p">()).</span><span class="nf">padStart</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">hour</span> <span class="o">=</span> <span class="nc">String</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nf">getHours</span><span class="p">()).</span><span class="nf">padStart</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">);</span> <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">year</span><span class="p">}${</span><span class="nx">month</span><span class="p">}${</span><span class="nx">day</span><span class="p">}${</span><span class="nx">hour</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span> <span class="c1">// Example usage</span> <span class="kd">const</span> <span class="nx">trader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SolarForecastTrader</span><span class="p">(</span> <span class="dl">"</span><span class="s2">https://solar-api.onrender.com</span><span class="dl">"</span><span class="p">,</span> <span class="mf">52.3676</span><span class="p">,</span> <span class="mf">4.9041</span><span class="p">,</span> <span class="mi">100</span> <span class="c1">// 100kW system</span> <span class="p">);</span> <span class="nx">trader</span><span class="p">.</span><span class="nf">generateTradingStrategy</span><span class="p">(</span><span class="mi">7</span><span class="p">).</span><span class="nf">then</span><span class="p">(</span><span class="nx">strategy</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">if </span><span class="p">(</span><span class="nx">strategy</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">7-Day Solar Trading Strategy:</span><span class="dl">'</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Total Forecast: </span><span class="p">${</span><span class="nx">strategy</span><span class="p">.</span><span class="nx">totalForecastMWh</span><span class="p">.</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span><span class="s2"> MWh`</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Daily Breakdown:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">strategy</span><span class="p">.</span><span class="nx">dailyBreakdown</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Recommendations:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">strategy</span><span class="p">.</span><span class="nx">recommendations</span><span class="p">);</span> <span class="p">}</span> <span class="p">});</span> </code></div></div> <p><button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">üìã Copy</button></p> <hr /> <h2 id="-research--analytics"><span class="me-2">üìä Research &amp; Analytics</span><a href="#-research--analytics" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>Analyze solar potential and climate patterns using comprehensive historical datasets.</p> <h3 id="use-case-seasonal-pattern-analysis"><span class="me-2">Use Case: Seasonal Pattern Analysis</span><a href="#use-case-seasonal-pattern-analysis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>Analyze seasonal solar irradiance patterns for climate research:</p> <div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kn">import</span> <span class="n">requests</span> <span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span> <span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span> <span class="kn">import</span> <span class="n">seaborn</span> <span class="k">as</span> <span class="n">sns</span> <span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span> <span class="k">class</span> <span class="nc">SolarPatternAnalyzer</span><span class="p">:</span> <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">api_base_url</span><span class="p">):</span> <span class="n">self</span><span class="p">.</span><span class="n">api_base_url</span> <span class="o">=</span> <span class="n">api_base_url</span> <span class="k">def</span> <span class="nf">get_multi_year_data</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">):</span> <span class="sh">"""</span><span class="s">Fetch multiple years of historical data</span><span class="sh">"""</span> <span class="n">all_data</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span> <span class="n">start_date</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s">0101</span><span class="sh">"</span> <span class="n">end_date</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s">1231</span><span class="sh">"</span> <span class="n">params</span> <span class="o">=</span> <span class="p">{</span> <span class="sh">"</span><span class="s">lat</span><span class="sh">"</span><span class="p">:</span> <span class="n">lat</span><span class="p">,</span> <span class="sh">"</span><span class="s">lon</span><span class="sh">"</span><span class="p">:</span> <span class="n">lon</span><span class="p">,</span> <span class="sh">"</span><span class="s">start</span><span class="sh">"</span><span class="p">:</span> <span class="n">start_date</span><span class="p">,</span> <span class="sh">"</span><span class="s">end</span><span class="sh">"</span><span class="p">:</span> <span class="n">end_date</span><span class="p">,</span> <span class="sh">"</span><span class="s">parameters</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">total_irradiance</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">community</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">SB</span><span class="sh">"</span> <span class="p">}</span> <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">api_base_url</span><span class="si">}</span><span class="s">/v1/irradiance/historical</span><span class="sh">"</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span> <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span> <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">()</span> <span class="n">all_data</span><span class="p">[</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">]</span> <span class="k">else</span><span class="p">:</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Failed to fetch data for </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span> <span class="k">return</span> <span class="n">all_data</span> <span class="k">def</span> <span class="nf">analyze_seasonal_patterns</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">years_range</span><span class="o">=</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">2023</span><span class="p">)):</span> <span class="sh">"""</span><span class="s">Analyze seasonal patterns across multiple years</span><span class="sh">"""</span> <span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span> <span class="o">=</span> <span class="n">years_range</span> <span class="n">raw_data</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">get_multi_year_data</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">)</span> <span class="c1"># Convert to DataFrame </span> <span class="n">all_records</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">year_data</span> <span class="ow">in</span> <span class="n">raw_data</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span> <span class="k">for</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">irradiance</span> <span class="ow">in</span> <span class="n">year_data</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">strptime</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="sh">'</span><span class="s">%Y%m%d%H</span><span class="sh">'</span><span class="p">)</span> <span class="n">all_records</span><span class="p">.</span><span class="nf">append</span><span class="p">({</span> <span class="sh">'</span><span class="s">datetime</span><span class="sh">'</span><span class="p">:</span> <span class="n">dt</span><span class="p">,</span> <span class="sh">'</span><span class="s">year</span><span class="sh">'</span><span class="p">:</span> <span class="n">dt</span><span class="p">.</span><span class="n">year</span><span class="p">,</span> <span class="sh">'</span><span class="s">month</span><span class="sh">'</span><span class="p">:</span> <span class="n">dt</span><span class="p">.</span><span class="n">month</span><span class="p">,</span> <span class="sh">'</span><span class="s">hour</span><span class="sh">'</span><span class="p">:</span> <span class="n">dt</span><span class="p">.</span><span class="n">hour</span><span class="p">,</span> <span class="sh">'</span><span class="s">day_of_year</span><span class="sh">'</span><span class="p">:</span> <span class="n">dt</span><span class="p">.</span><span class="nf">timetuple</span><span class="p">().</span><span class="n">tm_yday</span><span class="p">,</span> <span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">:</span> <span class="nf">float</span><span class="p">(</span><span class="n">irradiance</span><span class="p">)</span> <span class="p">})</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="n">all_records</span><span class="p">)</span> <span class="c1"># Seasonal analysis </span> <span class="n">monthly_avg</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">(</span><span class="sh">'</span><span class="s">month</span><span class="sh">'</span><span class="p">)[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">].</span><span class="nf">mean</span><span class="p">()</span> <span class="n">hourly_avg</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">(</span><span class="sh">'</span><span class="s">hour</span><span class="sh">'</span><span class="p">)[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">].</span><span class="nf">mean</span><span class="p">()</span> <span class="c1"># Daily totals by month </span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">date</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">datetime</span><span class="sh">'</span><span class="p">].</span><span class="n">dt</span><span class="p">.</span><span class="n">date</span> <span class="n">daily_totals</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="sh">'</span><span class="s">date</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">month</span><span class="sh">'</span><span class="p">])[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">].</span><span class="nf">sum</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">()</span> <span class="n">monthly_daily_avg</span> <span class="o">=</span> <span class="n">daily_totals</span><span class="p">.</span><span class="nf">groupby</span><span class="p">(</span><span class="sh">'</span><span class="s">month</span><span class="sh">'</span><span class="p">)[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">].</span><span class="nf">mean</span><span class="p">()</span> <span class="k">return</span> <span class="p">{</span> <span class="sh">'</span><span class="s">monthly_hourly_avg</span><span class="sh">'</span><span class="p">:</span> <span class="n">monthly_avg</span><span class="p">,</span> <span class="sh">'</span><span class="s">hourly_pattern</span><span class="sh">'</span><span class="p">:</span> <span class="n">hourly_avg</span><span class="p">,</span> <span class="sh">'</span><span class="s">monthly_daily_totals</span><span class="sh">'</span><span class="p">:</span> <span class="n">monthly_daily_avg</span><span class="p">,</span> <span class="sh">'</span><span class="s">dataframe</span><span class="sh">'</span><span class="p">:</span> <span class="n">df</span> <span class="p">}</span> <span class="k">def</span> <span class="nf">generate_insights</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">analysis_results</span><span class="p">,</span> <span class="n">location_name</span><span class="p">):</span> <span class="sh">"""</span><span class="s">Generate insights from the analysis</span><span class="sh">"""</span> <span class="n">monthly_avg</span> <span class="o">=</span> <span class="n">analysis_results</span><span class="p">[</span><span class="sh">'</span><span class="s">monthly_hourly_avg</span><span class="sh">'</span><span class="p">]</span> <span class="n">hourly_avg</span> <span class="o">=</span> <span class="n">analysis_results</span><span class="p">[</span><span class="sh">'</span><span class="s">hourly_pattern</span><span class="sh">'</span><span class="p">]</span> <span class="n">monthly_totals</span> <span class="o">=</span> <span class="n">analysis_results</span><span class="p">[</span><span class="sh">'</span><span class="s">monthly_daily_totals</span><span class="sh">'</span><span class="p">]</span> <span class="n">insights</span> <span class="o">=</span> <span class="p">{</span> <span class="sh">'</span><span class="s">location</span><span class="sh">'</span><span class="p">:</span> <span class="n">location_name</span><span class="p">,</span> <span class="sh">'</span><span class="s">peak_month</span><span class="sh">'</span><span class="p">:</span> <span class="n">monthly_avg</span><span class="p">.</span><span class="nf">idxmax</span><span class="p">(),</span> <span class="sh">'</span><span class="s">peak_month_avg</span><span class="sh">'</span><span class="p">:</span> <span class="n">monthly_avg</span><span class="p">.</span><span class="nf">max</span><span class="p">(),</span> <span class="sh">'</span><span class="s">lowest_month</span><span class="sh">'</span><span class="p">:</span> <span class="n">monthly_avg</span><span class="p">.</span><span class="nf">idxmin</span><span class="p">(),</span> <span class="sh">'</span><span class="s">lowest_month_avg</span><span class="sh">'</span><span class="p">:</span> <span class="n">monthly_avg</span><span class="p">.</span><span class="nf">min</span><span class="p">(),</span> <span class="sh">'</span><span class="s">peak_hour</span><span class="sh">'</span><span class="p">:</span> <span class="n">hourly_avg</span><span class="p">.</span><span class="nf">idxmax</span><span class="p">(),</span> <span class="sh">'</span><span class="s">peak_hour_avg</span><span class="sh">'</span><span class="p">:</span> <span class="n">hourly_avg</span><span class="p">.</span><span class="nf">max</span><span class="p">(),</span> <span class="sh">'</span><span class="s">summer_vs_winter_ratio</span><span class="sh">'</span><span class="p">:</span> <span class="n">monthly_avg</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">/</span> <span class="n">monthly_avg</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="c1"># June vs December </span> <span class="sh">'</span><span class="s">best_daily_total_month</span><span class="sh">'</span><span class="p">:</span> <span class="n">monthly_totals</span><span class="p">.</span><span class="nf">idxmax</span><span class="p">(),</span> <span class="sh">'</span><span class="s">best_daily_total</span><span class="sh">'</span><span class="p">:</span> <span class="n">monthly_totals</span><span class="p">.</span><span class="nf">max</span><span class="p">()</span> <span class="p">}</span> <span class="k">return</span> <span class="n">insights</span> <span class="c1"># Example usage </span><span class="n">analyzer</span> <span class="o">=</span> <span class="nc">SolarPatternAnalyzer</span><span class="p">(</span><span class="sh">"</span><span class="s">https://solar-api.onrender.com</span><span class="sh">"</span><span class="p">)</span> <span class="c1"># Analyze Amsterdam's solar patterns </span><span class="n">results</span> <span class="o">=</span> <span class="n">analyzer</span><span class="p">.</span><span class="nf">analyze_seasonal_patterns</span><span class="p">(</span><span class="mf">52.3676</span><span class="p">,</span> <span class="mf">4.9041</span><span class="p">,</span> <span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2023</span><span class="p">))</span> <span class="n">insights</span> <span class="o">=</span> <span class="n">analyzer</span><span class="p">.</span><span class="nf">generate_insights</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="sh">"</span><span class="s">Amsterdam, Netherlands</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Solar Pattern Analysis for </span><span class="si">{</span><span class="n">insights</span><span class="p">[</span><span class="sh">'</span><span class="s">location</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">:</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Peak Month: </span><span class="si">{</span><span class="n">insights</span><span class="p">[</span><span class="sh">'</span><span class="s">peak_month</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="n">insights</span><span class="p">[</span><span class="sh">'</span><span class="s">peak_month_avg</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}</span><span class="s"> W/m¬≤ avg)</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Lowest Month: </span><span class="si">{</span><span class="n">insights</span><span class="p">[</span><span class="sh">'</span><span class="s">lowest_month</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="n">insights</span><span class="p">[</span><span class="sh">'</span><span class="s">lowest_month_avg</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}</span><span class="s"> W/m¬≤ avg)</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Peak Hour: </span><span class="si">{</span><span class="n">insights</span><span class="p">[</span><span class="sh">'</span><span class="s">peak_hour</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="mi">02</span><span class="n">d</span><span class="si">}</span><span class="s">:00 (</span><span class="si">{</span><span class="n">insights</span><span class="p">[</span><span class="sh">'</span><span class="s">peak_hour_avg</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}</span><span class="s"> W/m¬≤ avg)</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Summer/Winter Ratio: </span><span class="si">{</span><span class="n">insights</span><span class="p">[</span><span class="sh">'</span><span class="s">summer_vs_winter_ratio</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}</span><span class="s">x</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Best Month for Daily Total: </span><span class="si">{</span><span class="n">insights</span><span class="p">[</span><span class="sh">'</span><span class="s">best_daily_total_month</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="n">insights</span><span class="p">[</span><span class="sh">'</span><span class="s">best_daily_total</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="si">}</span><span class="s"> Wh/m¬≤/day avg)</span><span class="sh">"</span><span class="p">)</span> </code></div></div> <p><button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">üìã Copy</button></p> <hr /> <h2 id="Ô∏è-weather-correlation-analysis"><span class="me-2">üå§Ô∏è Weather Correlation Analysis</span><a href="#Ô∏è-weather-correlation-analysis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>Analyze the relationship between weather conditions and solar irradiance.</p> <h3 id="use-case-cloud-cover-impact-study"><span class="me-2">Use Case: Cloud Cover Impact Study</span><a href="#use-case-cloud-cover-impact-study" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>Study how cloud cover affects solar irradiance:</p> <div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="c"># Multi-parameter analysis - Cloud cover vs Solar irradiance</span> curl <span class="s2">"https://solar-api.onrender.com/v1/irradiance/historical?lat=52.3676&amp;lon=4.9041&amp;start=20240601&amp;end=20240630&amp;parameters=total_irradiance"</span> <span class="o">&gt;</span> irradiance_june.json curl <span class="s2">"https://solar-api.onrender.com/v1/irradiance/historical?lat=52.3676&amp;lon=4.9041&amp;start=20240601&amp;end=20240630&amp;parameters=cloud_cover"</span> <span class="o">&gt;</span> clouds_june.json </code></div></div> <p><button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">üìã Copy</button></p> <div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kn">import</span> <span class="n">json</span> <span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span> <span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span> <span class="kn">from</span> <span class="n">scipy.stats</span> <span class="kn">import</span> <span class="n">pearsonr</span> <span class="c1"># Load both datasets </span><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">irradiance_june.json</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="n">irradiance_data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">'</span><span class="s">clouds_june.json</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="n">cloud_data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="c1"># Create correlation analysis </span><span class="n">timestamps</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">irradiance_data</span><span class="p">[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">].</span><span class="nf">keys</span><span class="p">())</span> <span class="n">irradiance_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">irradiance_data</span><span class="p">[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">][</span><span class="n">ts</span><span class="p">]</span> <span class="k">for</span> <span class="n">ts</span> <span class="ow">in</span> <span class="n">timestamps</span><span class="p">]</span> <span class="n">cloud_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">cloud_data</span><span class="p">[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">][</span><span class="n">ts</span><span class="p">]</span> <span class="k">for</span> <span class="n">ts</span> <span class="ow">in</span> <span class="n">timestamps</span><span class="p">]</span> <span class="c1"># Note: response uses 'irradiance' key </span> <span class="c1"># Filter daytime hours only (06:00 to 18:00) </span><span class="n">daytime_data</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ts</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">timestamps</span><span class="p">):</span> <span class="n">hour</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">ts</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:])</span> <span class="k">if</span> <span class="mi">6</span> <span class="o">&lt;=</span> <span class="n">hour</span> <span class="o">&lt;=</span> <span class="mi">18</span><span class="p">:</span> <span class="n">daytime_data</span><span class="p">.</span><span class="nf">append</span><span class="p">({</span> <span class="sh">'</span><span class="s">timestamp</span><span class="sh">'</span><span class="p">:</span> <span class="n">ts</span><span class="p">,</span> <span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">:</span> <span class="n">irradiance_values</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="sh">'</span><span class="s">cloud_cover</span><span class="sh">'</span><span class="p">:</span> <span class="n">cloud_values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">})</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="n">daytime_data</span><span class="p">)</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">])</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">cloud_cover</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">cloud_cover</span><span class="sh">'</span><span class="p">])</span> <span class="c1"># Calculate correlation </span><span class="n">correlation</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="nf">pearsonr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">cloud_cover</span><span class="sh">'</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">])</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Cloud Cover vs Solar Irradiance Analysis:</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Correlation coefficient: </span><span class="si">{</span><span class="n">correlation</span><span class="si">:</span><span class="p">.</span><span class="mi">3</span><span class="n">f</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">P-value: </span><span class="si">{</span><span class="n">p_value</span><span class="si">:</span><span class="p">.</span><span class="mi">6</span><span class="n">f</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Relationship: </span><span class="si">{</span><span class="sh">'</span><span class="s">Strong</span><span class="sh">'</span> <span class="k">if</span> <span class="nf">abs</span><span class="p">(</span><span class="n">correlation</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.7</span> <span class="k">else</span> <span class="sh">'</span><span class="s">Moderate</span><span class="sh">'</span> <span class="k">if</span> <span class="nf">abs</span><span class="p">(</span><span class="n">correlation</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.4</span> <span class="k">else</span> <span class="sh">'</span><span class="s">Weak</span><span class="sh">'</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span> <span class="c1"># Efficiency analysis by cloud cover bins </span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">cloud_bin</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">cut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">'</span><span class="s">cloud_cover</span><span class="sh">'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Clear</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Partly Cloudy</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Mostly Cloudy</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Overcast</span><span class="sh">'</span><span class="p">])</span> <span class="n">efficiency_by_clouds</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="nf">groupby</span><span class="p">(</span><span class="sh">'</span><span class="s">cloud_bin</span><span class="sh">'</span><span class="p">)[</span><span class="sh">'</span><span class="s">irradiance</span><span class="sh">'</span><span class="p">].</span><span class="nf">agg</span><span class="p">([</span><span class="sh">'</span><span class="s">mean</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">std</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">count</span><span class="sh">'</span><span class="p">])</span> <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">Irradiance by Cloud Cover Category:</span><span class="sh">"</span><span class="p">)</span> <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">efficiency_by_clouds</span><span class="p">.</span><span class="n">index</span><span class="p">:</span> <span class="n">mean_irr</span> <span class="o">=</span> <span class="n">efficiency_by_clouds</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">category</span><span class="p">,</span> <span class="sh">'</span><span class="s">mean</span><span class="sh">'</span><span class="p">]</span> <span class="n">std_irr</span> <span class="o">=</span> <span class="n">efficiency_by_clouds</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">category</span><span class="p">,</span> <span class="sh">'</span><span class="s">std</span><span class="sh">'</span><span class="p">]</span> <span class="n">count</span> <span class="o">=</span> <span class="n">efficiency_by_clouds</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">category</span><span class="p">,</span> <span class="sh">'</span><span class="s">count</span><span class="sh">'</span><span class="p">]</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">mean_irr</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}</span><span class="s"> ¬± </span><span class="si">{</span><span class="n">std_irr</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}</span><span class="s"> W/m¬≤ (n=</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span> </code></div></div> <p><button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">üìã Copy</button></p> <hr /> <h2 id="-real-time-monitoring-dashboard"><span class="me-2">üîÑ Real-Time Monitoring Dashboard</span><a href="#-real-time-monitoring-dashboard" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <p>Build a real-time monitoring system combining historical data with forecasts.</p> <h3 id="use-case-solar-farm-monitoring"><span class="me-2">Use Case: Solar Farm Monitoring</span><a href="#use-case-solar-farm-monitoring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>Create a monitoring dashboard for solar farm operators:</p> <div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kd">class</span> <span class="nc">SolarFarmDashboard</span> <span class="p">{</span> <span class="nf">constructor</span><span class="p">(</span><span class="nx">apiBaseUrl</span><span class="p">,</span> <span class="nx">farmConfig</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">apiBaseUrl</span> <span class="o">=</span> <span class="nx">apiBaseUrl</span><span class="p">;</span> <span class="k">this</span><span class="p">.</span><span class="nx">farmConfig</span> <span class="o">=</span> <span class="nx">farmConfig</span><span class="p">;</span> <span class="c1">// {lat, lon, capacity, efficiency}</span> <span class="k">this</span><span class="p">.</span><span class="nx">updateInterval</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">15</span><span class="p">;</span> <span class="c1">// 15 minutes</span> <span class="p">}</span> <span class="k">async</span> <span class="nf">getCurrentStatus</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// Get yesterday's actual performance</span> <span class="kd">const</span> <span class="nx">yesterday</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">();</span> <span class="nx">yesterday</span><span class="p">.</span><span class="nf">setDate</span><span class="p">(</span><span class="nx">yesterday</span><span class="p">.</span><span class="nf">getDate</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">yesterdayStr</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">formatDate</span><span class="p">(</span><span class="nx">yesterday</span><span class="p">);</span> <span class="c1">// Get today's forecast</span> <span class="kd">const</span> <span class="nx">today</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">();</span> <span class="kd">const</span> <span class="nx">todayStart</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">formatDateTime</span><span class="p">(</span><span class="nx">today</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">tomorrow</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">(</span><span class="nx">today</span><span class="p">);</span> <span class="nx">tomorrow</span><span class="p">.</span><span class="nf">setDate</span><span class="p">(</span><span class="nx">tomorrow</span><span class="p">.</span><span class="nf">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">tomorrowStr</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">formatDateTime</span><span class="p">(</span><span class="nx">tomorrow</span><span class="p">);</span> <span class="k">try</span> <span class="p">{</span> <span class="kd">const</span> <span class="p">[</span><span class="nx">historical</span><span class="p">,</span> <span class="nx">forecast</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nf">all</span><span class="p">([</span> <span class="k">this</span><span class="p">.</span><span class="nf">getHistoricalData</span><span class="p">(</span><span class="nx">yesterdayStr</span><span class="p">,</span> <span class="nx">yesterdayStr</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nf">getForecastData</span><span class="p">(</span><span class="nx">todayStart</span><span class="p">,</span> <span class="nx">tomorrowStr</span><span class="p">)</span> <span class="p">]);</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nf">processStatus</span><span class="p">(</span><span class="nx">historical</span><span class="p">,</span> <span class="nx">forecast</span><span class="p">);</span> <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error fetching status:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span> <span class="k">async</span> <span class="nf">getHistoricalData</span><span class="p">(</span><span class="nx">startDate</span><span class="p">,</span> <span class="nx">endDate</span><span class="p">)</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">apiBaseUrl</span><span class="p">}</span><span class="s2">/v1/irradiance/historical`</span><span class="p">;</span> <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">URLSearchParams</span><span class="p">({</span> <span class="na">lat</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">farmConfig</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="na">lon</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">farmConfig</span><span class="p">.</span><span class="nx">lon</span><span class="p">,</span> <span class="na">start</span><span class="p">:</span> <span class="nx">startDate</span><span class="p">,</span> <span class="na">end</span><span class="p">:</span> <span class="nx">endDate</span><span class="p">,</span> <span class="na">parameters</span><span class="p">:</span> <span class="dl">'</span><span class="s1">total_irradiance</span><span class="dl">'</span> <span class="p">});</span> <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">fetch</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">url</span><span class="p">}</span><span class="s2">?</span><span class="p">${</span><span class="nx">params</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span> <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">();</span> <span class="p">}</span> <span class="k">async</span> <span class="nf">getForecastData</span><span class="p">(</span><span class="nx">startDateTime</span><span class="p">,</span> <span class="nx">endDateTime</span><span class="p">)</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">apiBaseUrl</span><span class="p">}</span><span class="s2">/v1/irradiance/forecast`</span><span class="p">;</span> <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">URLSearchParams</span><span class="p">({</span> <span class="na">lat</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">farmConfig</span><span class="p">.</span><span class="nx">lat</span><span class="p">,</span> <span class="na">lon</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">farmConfig</span><span class="p">.</span><span class="nx">lon</span><span class="p">,</span> <span class="na">start</span><span class="p">:</span> <span class="nx">startDateTime</span><span class="p">,</span> <span class="na">end</span><span class="p">:</span> <span class="nx">endDateTime</span> <span class="p">});</span> <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">fetch</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">url</span><span class="p">}</span><span class="s2">?</span><span class="p">${</span><span class="nx">params</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span> <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">();</span> <span class="p">}</span> <span class="nf">processStatus</span><span class="p">(</span><span class="nx">historical</span><span class="p">,</span> <span class="nx">forecast</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Calculate yesterday's performance</span> <span class="kd">const</span> <span class="nx">yesterdayIrradiance</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">values</span><span class="p">(</span><span class="nx">historical</span><span class="p">.</span><span class="nx">irradiance</span><span class="p">).</span><span class="nf">map</span><span class="p">(</span><span class="nb">Number</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">yesterdayTotal</span> <span class="o">=</span> <span class="nx">yesterdayIrradiance</span><span class="p">.</span><span class="nf">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">val</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">yesterdayPowerMWh</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">irradianceToPower</span><span class="p">(</span><span class="nx">yesterdayTotal</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">// Process today's forecast</span> <span class="kd">const</span> <span class="nx">todayForecast</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">entries</span><span class="p">(</span><span class="nx">forecast</span><span class="p">.</span><span class="nx">forecast</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">todayTotal</span> <span class="o">=</span> <span class="nx">todayForecast</span><span class="p">.</span><span class="nf">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="p">[</span><span class="nx">_</span><span class="p">,</span> <span class="nx">irr</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">irr</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">todayForecastMWh</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">irradianceToPower</span><span class="p">(</span><span class="nx">todayTotal</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">// Find peak hours</span> <span class="kd">const</span> <span class="nx">peakHour</span> <span class="o">=</span> <span class="nx">todayForecast</span><span class="p">.</span><span class="nf">reduce</span><span class="p">((</span><span class="nx">max</span><span class="p">,</span> <span class="p">[</span><span class="nx">time</span><span class="p">,</span> <span class="nx">irr</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="nx">irr</span> <span class="o">&gt;</span> <span class="nx">max</span><span class="p">.</span><span class="nx">irr</span> <span class="p">?</span> <span class="p">{</span><span class="nx">time</span><span class="p">,</span> <span class="nx">irr</span><span class="p">}</span> <span class="p">:</span> <span class="nx">max</span><span class="p">,</span> <span class="p">{</span><span class="na">time</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span> <span class="na">irr</span><span class="p">:</span> <span class="mi">0</span><span class="p">});</span> <span class="k">return</span> <span class="p">{</span> <span class="na">timestamp</span><span class="p">:</span> <span class="k">new</span> <span class="nc">Date</span><span class="p">().</span><span class="nf">toISOString</span><span class="p">(),</span> <span class="na">yesterday</span><span class="p">:</span> <span class="p">{</span> <span class="na">totalMWh</span><span class="p">:</span> <span class="nx">yesterdayPowerMWh</span><span class="p">.</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="na">avgIrradiance</span><span class="p">:</span> <span class="p">(</span><span class="nx">yesterdayTotal</span> <span class="o">/</span> <span class="nx">yesterdayIrradiance</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">},</span> <span class="na">today</span><span class="p">:</span> <span class="p">{</span> <span class="na">forecastMWh</span><span class="p">:</span> <span class="nx">todayForecastMWh</span><span class="p">.</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="na">peakHour</span><span class="p">:</span> <span class="nx">peakHour</span><span class="p">.</span><span class="nx">time</span><span class="p">,</span> <span class="na">peakIrradiance</span><span class="p">:</span> <span class="nx">peakHour</span><span class="p">.</span><span class="nx">irr</span><span class="p">.</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">},</span> <span class="na">farmCapacity</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">farmConfig</span><span class="p">.</span><span class="nx">capacity</span><span class="p">,</span> <span class="na">efficiency</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">farmConfig</span><span class="p">.</span><span class="nx">efficiency</span> <span class="p">};</span> <span class="p">}</span> <span class="nf">irradianceToPower</span><span class="p">(</span><span class="nx">irradiance</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Convert total irradiance (Wh/m¬≤) to power (kWh)</span> <span class="k">return</span> <span class="nx">irradiance</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">farmConfig</span><span class="p">.</span><span class="nx">capacity</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">farmConfig</span><span class="p">.</span><span class="nx">efficiency</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span> <span class="p">}</span> <span class="nf">formatDate</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nf">getFullYear</span><span class="p">();</span> <span class="kd">const</span> <span class="nx">month</span> <span class="o">=</span> <span class="nc">String</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nf">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nf">padStart</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">day</span> <span class="o">=</span> <span class="nc">String</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nf">getDate</span><span class="p">()).</span><span class="nf">padStart</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">);</span> <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">year</span><span class="p">}${</span><span class="nx">month</span><span class="p">}${</span><span class="nx">day</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span> <span class="p">}</span> <span class="nf">formatDateTime</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nf">formatDate</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">+</span> <span class="nc">String</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nf">getHours</span><span class="p">()).</span><span class="nf">padStart</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">);</span> <span class="p">}</span> <span class="nf">startMonitoring</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Starting solar farm monitoring...</span><span class="dl">'</span><span class="p">);</span> <span class="kd">const</span> <span class="nx">updateDashboard</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="kd">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nf">getCurrentStatus</span><span class="p">();</span> <span class="k">if </span><span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nf">displayStatus</span><span class="p">(</span><span class="nx">status</span><span class="p">);</span> <span class="p">}</span> <span class="p">};</span> <span class="c1">// Initial update</span> <span class="nf">updateDashboard</span><span class="p">();</span> <span class="c1">// Set up periodic updates</span> <span class="nf">setInterval</span><span class="p">(</span><span class="nx">updateDashboard</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">updateInterval</span><span class="p">);</span> <span class="p">}</span> <span class="nf">displayStatus</span><span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nf">clear</span><span class="p">();</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">=== SOLAR FARM DASHBOARD ===</span><span class="dl">'</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Last Update: </span><span class="p">${</span><span class="k">new</span> <span class="nc">Date</span><span class="p">(</span><span class="nx">status</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">).</span><span class="nf">toLocaleString</span><span class="p">()}</span><span class="s2">`</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Yesterday Performance:</span><span class="dl">'</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">` Total Energy: </span><span class="p">${</span><span class="nx">status</span><span class="p">.</span><span class="nx">yesterday</span><span class="p">.</span><span class="nx">totalMWh</span><span class="p">}</span><span class="s2"> MWh`</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">` Avg Irradiance: </span><span class="p">${</span><span class="nx">status</span><span class="p">.</span><span class="nx">yesterday</span><span class="p">.</span><span class="nx">avgIrradiance</span><span class="p">}</span><span class="s2"> W/m¬≤`</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Today Forecast:</span><span class="dl">'</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">` Forecast Energy: </span><span class="p">${</span><span class="nx">status</span><span class="p">.</span><span class="nx">today</span><span class="p">.</span><span class="nx">forecastMWh</span><span class="p">}</span><span class="s2"> MWh`</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">` Peak Hour: </span><span class="p">${</span><span class="nx">status</span><span class="p">.</span><span class="nx">today</span><span class="p">.</span><span class="nx">peakHour</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">` Peak Irradiance: </span><span class="p">${</span><span class="nx">status</span><span class="p">.</span><span class="nx">today</span><span class="p">.</span><span class="nx">peakIrradiance</span><span class="p">}</span><span class="s2"> W/m¬≤`</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Farm Capacity: </span><span class="p">${</span><span class="nx">status</span><span class="p">.</span><span class="nx">farmCapacity</span><span class="p">}</span><span class="s2"> MW`</span><span class="p">);</span> <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Efficiency: </span><span class="p">${(</span><span class="nx">status</span><span class="p">.</span><span class="nx">efficiency</span> <span class="o">*</span> <span class="mi">100</span><span class="p">).</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)}</span><span class="s2">%`</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span> <span class="c1">// Example usage</span> <span class="kd">const</span> <span class="nx">farmConfig</span> <span class="o">=</span> <span class="p">{</span> <span class="na">lat</span><span class="p">:</span> <span class="mf">52.3676</span><span class="p">,</span> <span class="na">lon</span><span class="p">:</span> <span class="mf">4.9041</span><span class="p">,</span> <span class="na">capacity</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="c1">// 50 MW solar farm</span> <span class="na">efficiency</span><span class="p">:</span> <span class="mf">0.18</span> <span class="c1">// 18% panel efficiency</span> <span class="p">};</span> <span class="kd">const</span> <span class="nx">dashboard</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SolarFarmDashboard</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://solar-api.onrender.com</span><span class="dl">"</span><span class="p">,</span> <span class="nx">farmConfig</span><span class="p">);</span> <span class="nx">dashboard</span><span class="p">.</span><span class="nf">startMonitoring</span><span class="p">();</span> </code></div></div> <p><button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">üìã Copy</button></p> <hr /> <h2 id="-integration-examples"><span class="me-2">üì± Integration Examples</span><a href="#-integration-examples" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <h3 id="webhook-integration-for-alerts"><span class="me-2">Webhook Integration for Alerts</span><a href="#webhook-integration-for-alerts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <p>Set up automated alerts based on forecast conditions:</p> <div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kn">import</span> <span class="n">requests</span> <span class="kn">import</span> <span class="n">schedule</span> <span class="kn">import</span> <span class="n">time</span> <span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span> <span class="k">class</span> <span class="nc">SolarAlertSystem</span><span class="p">:</span> <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">api_base_url</span><span class="p">,</span> <span class="n">webhook_url</span><span class="p">,</span> <span class="n">locations</span><span class="p">):</span> <span class="n">self</span><span class="p">.</span><span class="n">api_base_url</span> <span class="o">=</span> <span class="n">api_base_url</span> <span class="n">self</span><span class="p">.</span><span class="n">webhook_url</span> <span class="o">=</span> <span class="n">webhook_url</span> <span class="n">self</span><span class="p">.</span><span class="n">locations</span> <span class="o">=</span> <span class="n">locations</span> <span class="k">def</span> <span class="nf">check_weather_alerts</span><span class="p">(</span><span class="n">self</span><span class="p">):</span> <span class="sh">"""</span><span class="s">Check for significant weather events affecting solar production</span><span class="sh">"""</span> <span class="n">tomorrow</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span> <span class="o">+</span> <span class="nf">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="n">start</span> <span class="o">=</span> <span class="n">tomorrow</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="sh">'</span><span class="s">%Y%m%d00</span><span class="sh">'</span><span class="p">)</span> <span class="n">end</span> <span class="o">=</span> <span class="n">tomorrow</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="sh">'</span><span class="s">%Y%m%d23</span><span class="sh">'</span><span class="p">)</span> <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">locations</span><span class="p">:</span> <span class="k">try</span><span class="p">:</span> <span class="c1"># Get forecast for tomorrow </span> <span class="n">params</span> <span class="o">=</span> <span class="p">{</span> <span class="sh">'</span><span class="s">lat</span><span class="sh">'</span><span class="p">:</span> <span class="n">location</span><span class="p">[</span><span class="sh">'</span><span class="s">lat</span><span class="sh">'</span><span class="p">],</span> <span class="sh">'</span><span class="s">lon</span><span class="sh">'</span><span class="p">:</span> <span class="n">location</span><span class="p">[</span><span class="sh">'</span><span class="s">lon</span><span class="sh">'</span><span class="p">],</span> <span class="sh">'</span><span class="s">start</span><span class="sh">'</span><span class="p">:</span> <span class="n">start</span><span class="p">,</span> <span class="sh">'</span><span class="s">end</span><span class="sh">'</span><span class="p">:</span> <span class="n">end</span> <span class="p">}</span> <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">api_base_url</span><span class="si">}</span><span class="s">/v1/irradiance/forecast</span><span class="sh">"</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span> <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">()</span> <span class="c1"># Analyze forecast </span> <span class="n">hourly_values</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">forecast</span><span class="sh">'</span><span class="p">].</span><span class="nf">values</span><span class="p">())</span> <span class="n">daily_total</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">hourly_values</span><span class="p">)</span> <span class="n">peak_hour</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">hourly_values</span><span class="p">)</span> <span class="c1"># Generate alerts </span> <span class="n">alerts</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">daily_total</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span> <span class="c1"># Less than 1 kWh/m¬≤ </span> <span class="n">alerts</span><span class="p">.</span><span class="nf">append</span><span class="p">({</span> <span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">LOW_PRODUCTION</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">:</span> <span class="sa">f</span><span class="sh">'</span><span class="s">Low solar production forecast for </span><span class="si">{</span><span class="n">location</span><span class="p">[</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">]</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">daily_total</span><span class="si">:</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="si">}</span><span class="s"> Wh/m¬≤</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">severity</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">warning</span><span class="sh">'</span> <span class="p">})</span> <span class="k">if</span> <span class="n">peak_hour</span> <span class="o">&gt;</span> <span class="mi">800</span><span class="p">:</span> <span class="c1"># Very high peak </span> <span class="n">alerts</span><span class="p">.</span><span class="nf">append</span><span class="p">({</span> <span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">HIGH_PRODUCTION</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">:</span> <span class="sa">f</span><span class="sh">'</span><span class="s">High solar production forecast for </span><span class="si">{</span><span class="n">location</span><span class="p">[</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">]</span><span class="si">}</span><span class="s">: peak </span><span class="si">{</span><span class="n">peak_hour</span><span class="si">:</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="si">}</span><span class="s"> W/m¬≤</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">severity</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">info</span><span class="sh">'</span> <span class="p">})</span> <span class="c1"># Send alerts </span> <span class="k">for</span> <span class="n">alert</span> <span class="ow">in</span> <span class="n">alerts</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="nf">send_alert</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span> <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Error checking alerts for </span><span class="si">{</span><span class="n">location</span><span class="p">[</span><span class="sh">'</span><span class="s">name</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span> <span class="k">def</span> <span class="nf">send_alert</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">alert</span><span class="p">,</span> <span class="n">location</span><span class="p">):</span> <span class="sh">"""</span><span class="s">Send alert to webhook</span><span class="sh">"""</span> <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="sh">'</span><span class="s">text</span><span class="sh">'</span><span class="p">:</span> <span class="sa">f</span><span class="sh">"</span><span class="s">üåû Solar Alert: </span><span class="si">{</span><span class="n">alert</span><span class="p">[</span><span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">,</span> <span class="sh">'</span><span class="s">location</span><span class="sh">'</span><span class="p">:</span> <span class="n">location</span><span class="p">[</span><span class="sh">'</span><span class="s">name</span><span class="sh">'</span><span class="p">],</span> <span class="sh">'</span><span class="s">coordinates</span><span class="sh">'</span><span class="p">:</span> <span class="sa">f</span><span class="sh">"</span><span class="s">(</span><span class="si">{</span><span class="n">location</span><span class="p">[</span><span class="sh">'</span><span class="s">lat</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">location</span><span class="p">[</span><span class="sh">'</span><span class="s">lon</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">,</span> <span class="sh">'</span><span class="s">severity</span><span class="sh">'</span><span class="p">:</span> <span class="n">alert</span><span class="p">[</span><span class="sh">'</span><span class="s">severity</span><span class="sh">'</span><span class="p">],</span> <span class="sh">'</span><span class="s">timestamp</span><span class="sh">'</span><span class="p">:</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">().</span><span class="nf">isoformat</span><span class="p">()</span> <span class="p">}</span> <span class="k">try</span><span class="p">:</span> <span class="n">requests</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">webhook_url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Alert sent for </span><span class="si">{</span><span class="n">location</span><span class="p">[</span><span class="sh">'</span><span class="s">name</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">alert</span><span class="p">[</span><span class="sh">'</span><span class="s">message</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span> <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Failed to send alert: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span> <span class="c1"># Example usage </span><span class="n">locations</span> <span class="o">=</span> <span class="p">[</span> <span class="p">{</span><span class="sh">'</span><span class="s">name</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Amsterdam Solar Farm</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">lat</span><span class="sh">'</span><span class="p">:</span> <span class="mf">52.3676</span><span class="p">,</span> <span class="sh">'</span><span class="s">lon</span><span class="sh">'</span><span class="p">:</span> <span class="mf">4.9041</span><span class="p">},</span> <span class="p">{</span><span class="sh">'</span><span class="s">name</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Rotterdam Installation</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">lat</span><span class="sh">'</span><span class="p">:</span> <span class="mf">51.9244</span><span class="p">,</span> <span class="sh">'</span><span class="s">lon</span><span class="sh">'</span><span class="p">:</span> <span class="mf">4.4777</span><span class="p">}</span> <span class="p">]</span> <span class="n">alert_system</span> <span class="o">=</span> <span class="nc">SolarAlertSystem</span><span class="p">(</span> <span class="sh">"</span><span class="s">https://solar-api.onrender.com</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">https://hooks.slack.com/your-webhook-url</span><span class="sh">"</span><span class="p">,</span> <span class="n">locations</span> <span class="p">)</span> <span class="c1"># Schedule daily checks </span><span class="n">schedule</span><span class="p">.</span><span class="nf">every</span><span class="p">().</span><span class="n">day</span><span class="p">.</span><span class="nf">at</span><span class="p">(</span><span class="sh">"</span><span class="s">18:00</span><span class="sh">"</span><span class="p">).</span><span class="nf">do</span><span class="p">(</span><span class="n">alert_system</span><span class="p">.</span><span class="n">check_weather_alerts</span><span class="p">)</span> <span class="c1"># Run scheduler </span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="n">schedule</span><span class="p">.</span><span class="nf">run_pending</span><span class="p">()</span> <span class="n">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span> </code></div></div> <p><button class="copy-btn" onclick="copyToClipboard(this.previousElementSibling.textContent)">üìã Copy</button></p> <hr /> <h2 id="-best-practices--tips"><span class="me-2">üîß Best Practices &amp; Tips</span><a href="#-best-practices--tips" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2> <h3 id="error-handling--retry-logic"><span class="me-2">Error Handling &amp; Retry Logic</span><a href="#error-handling--retry-logic" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kn">import</span> <span class="n">time</span> <span class="kn">import</span> <span class="n">random</span> <span class="kn">from</span> <span class="n">functools</span> <span class="kn">import</span> <span class="n">wraps</span> <span class="k">def</span> <span class="nf">retry_with_backoff</span><span class="p">(</span><span class="n">retries</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">backoff_in_seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span> <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">while</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">retries</span><span class="p">:</span> <span class="k">try</span><span class="p">:</span> <span class="k">return</span> <span class="nf">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">retries</span><span class="p">:</span> <span class="k">raise</span> <span class="n">e</span> <span class="n">sleep_time</span> <span class="o">=</span> <span class="p">(</span><span class="n">backoff_in_seconds</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">**</span> <span class="n">x</span> <span class="o">+</span> <span class="n">random</span><span class="p">.</span><span class="nf">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="n">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="n">sleep_time</span><span class="p">)</span> <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span> <span class="k">return</span> <span class="n">wrapper</span> <span class="k">return</span> <span class="n">decorator</span> <span class="nd">@retry_with_backoff</span><span class="p">(</span><span class="n">retries</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">backoff_in_seconds</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="k">def</span> <span class="nf">robust_api_call</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span> <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span> <span class="n">response</span><span class="p">.</span><span class="nf">raise_for_status</span><span class="p">()</span> <span class="k">return</span> <span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">()</span> </code></div></div> <h3 id="data-caching-strategy"><span class="me-2">Data Caching Strategy</span><a href="#data-caching-strategy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3> <div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><span class="kn">import</span> <span class="n">json</span> <span class="kn">import</span> <span class="n">os</span> <span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span> <span class="k">class</span> <span class="nc">APICache</span><span class="p">:</span> <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">cache_dir</span><span class="o">=</span><span class="sh">'</span><span class="s">cache</span><span class="sh">'</span><span class="p">):</span> <span class="n">self</span><span class="p">.</span><span class="n">cache_dir</span> <span class="o">=</span> <span class="n">cache_dir</span> <span class="n">os</span><span class="p">.</span><span class="nf">makedirs</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="k">def</span> <span class="nf">get_cache_key</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span> <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="sh">'</span><span class="s">lat</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">_</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="sh">'</span><span class="s">lon</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">_</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="sh">'</span><span class="s">start</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">_</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="sh">'</span><span class="s">end</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">.json</span><span class="sh">"</span> <span class="k">def</span> <span class="nf">is_cache_valid</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">max_age_hours</span><span class="o">=</span><span class="mi">24</span><span class="p">):</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span> <span class="k">return</span> <span class="bp">False</span> <span class="n">file_age</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">fromtimestamp</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">getmtime</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span> <span class="k">return</span> <span class="n">file_age</span> <span class="o">&lt;</span> <span class="nf">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="n">max_age_hours</span><span class="p">)</span> <span class="k">def</span> <span class="nf">get_cached_data</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span> <span class="n">cache_file</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">cache_dir</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="nf">get_cache_key</span><span class="p">(</span><span class="n">params</span><span class="p">))</span> <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="nf">is_cache_valid</span><span class="p">(</span><span class="n">cache_file</span><span class="p">):</span> <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">return</span> <span class="bp">None</span> <span class="k">def</span> <span class="nf">cache_data</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span> <span class="n">cache_file</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">cache_dir</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="nf">get_cache_key</span><span class="p">(</span><span class="n">params</span><span class="p">))</span> <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="n">json</span><span class="p">.</span><span class="nf">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> </code></div></div> <script> function copyToClipboard(text) { navigator.clipboard.writeText(text.trim()).then(function() { console.log('Copied to clipboard'); }); } </script> </div> </article> </main> <!-- panel --> <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"> <div class="access"> <!-- Get 5 last posted/updated posts --> <!-- The trending tags list --> </div> </aside> </div> <div class="row"> <!-- tail --> <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"> <!-- The Footer --> <footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " > <p>¬© <time>2025</time> <a href="https://twitter.com/oguzhansavas">Oguzhan Savas</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span> </p> <p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>. </p> </footer> </div> </div> <!-- The Search results --> <div id="search-result-wrapper" class="d-flex justify-content-center d-none"> <div class="col-11 content"> <div id="search-hints"> <!-- The trending tags list --> </div> <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div> </div> </div> </div> <aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button> </aside> </div> <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div> <!-- Embedded scripts --> <!-- Jekyll Simple Search loader See: <https://github.com/christian-fei/Simple-Jekyll-Search> --> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/solar_api/assets/js/data/search.json', searchResultTemplate: ' <article class="px-1 px-sm-2 px-lg-4 px-xl-0"> <header> <h2><a href="{url}">{title}</a></h2> <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags} </div> </header> <p>{content}</p> </article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script> </body> </html>
